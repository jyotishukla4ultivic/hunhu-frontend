import { Component, Input } from '@angular/core';
import { NgClass, NgStyle, CommonModule } from '@angular/common';

@Component({
  selector: 'app-stat-card',
  standalone: true,
  imports: [NgClass, NgStyle, CommonModule],
  template: `
    <div class='bg-white rounded-xl shadow p-4 flex flex-col gap-2 min-w-[180px]'>
      <div class='flex items-center justify-between gap-2'>
        <span class='text-gray-500 text-sm'>{{label}}</span>
        <span class="inline-flex items-center justify-center rounded-full" [ngStyle]="{'background': iconBg || '#F5F8FF', 'width': '48px', 'height': '48px'}">
          <ng-container [ngSwitch]="iconType">
            <!-- Agency: Modern user icon -->
            <svg *ngSwitchCase="'group'" width="48" height="48" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path opacity="0.21" d="M37 0C49.7025 0 60 10.2975 60 23V37C60 49.7025 49.7025 60 37 60H23C10.2975 60 0 49.7025 0 37V23C0 10.2975 10.2975 0 23 0H37Z" fill="#8280FF"/>
              <path opacity="0.587821" d="M37.9997 24.667C40.2088 24.667 41.9997 26.4579 41.9997 28.667C41.9995 30.876 40.2087 32.667 37.9997 32.667C35.7908 32.6668 33.9999 30.8759 33.9997 28.667C33.9997 26.458 35.7907 24.6672 37.9997 24.667ZM25.9997 18C28.9451 18 31.3335 20.3876 31.3337 23.333C31.3337 26.2785 28.9452 28.667 25.9997 28.667C23.0543 28.6668 20.6667 26.2784 20.6667 23.333C20.6669 20.3877 23.0544 18.0002 25.9997 18Z" fill="#8280FF"/>
              <path d="M25.9774 31.333C32.3611 31.333 37.6061 34.3905 37.997 40.9326C38.0125 41.1932 37.9966 42 36.995 42H14.9696C14.6351 41.9996 13.9727 41.2782 14.0009 40.9316C14.5178 34.5683 19.6824 31.3331 25.9774 31.333ZM37.4696 34.002C42.011 34.0521 45.7189 36.3476 45.9979 41.2002C46.0091 41.3961 45.9972 41.9996 45.2753 42H40.1337C40.1336 38.9995 39.1423 36.2299 37.4696 34.002Z" fill="#8280FF"/>
            </svg>
            <!-- Provider: 3D cube/box icon -->
            <svg *ngSwitchCase="'provider'" width="48" height="48" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path opacity="0.21" d="M37 0C49.7025 0 60 10.2975 60 23V37C60 49.7025 49.7025 60 37 60H23C10.2975 60 0 49.7025 0 37V23C0 10.2975 10.2975 0 23 0H37Z" fill="#FEC53D"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M15 24.3162L27.9005 31.7643C28.0394 31.8445 28.1851 31.9024 28.3333 31.9392V46.3844L15.9201 39.0382C15.3498 38.7007 15 38.0873 15 37.4246V24.3162ZM45 24.1182V37.4246C45 38.0873 44.6502 38.7007 44.0799 39.0382L31.6667 46.3844V31.8126C31.6969 31.7975 31.7269 31.7814 31.7566 31.7643L45 24.1182Z" fill="#FEC53D"/>
              <path opacity="0.499209" fill-rule="evenodd" clip-rule="evenodd" d="M15.4052 20.7014C15.5628 20.5024 15.7617 20.3343 15.9936 20.2108L29.1186 13.2201C29.6695 12.9266 30.3304 12.9266 30.8814 13.2201L44.0064 20.2108C44.1852 20.306 44.3443 20.4277 44.48 20.5697L30.0899 28.8778C29.9953 28.9325 29.908 28.995 29.8285 29.064C29.749 28.995 29.6618 28.9325 29.5671 28.8778L15.4052 20.7014Z" fill="#FEC53D"/>
            </svg>
            <!-- Consumers: Chart with arrow icon -->
            <svg *ngSwitchCase="'graph'" width="48" height="48" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path opacity="0.21" d="M37 0C49.7025 0 60 10.2975 60 23V37C60 49.7025 49.7025 60 37 60H23C10.2975 60 0 49.7025 0 37V23C0 10.2975 10.2975 0 23 0H37Z" fill="#4AD991"/>
              <path d="M19.1111 40.8889H42.4444C43.3036 40.8889 44 41.5853 44 42.4444C44 43.3036 43.3036 44 42.4444 44H17.5556C16.6964 44 16 43.3036 16 42.4444V17.5556C16 16.6964 16.6964 16 17.5556 16C18.4147 16 19.1111 16.6964 19.1111 17.5556V40.8889Z" fill="#4AD991"/>
              <path opacity="0.5" d="M24.9126 34.175C24.325 34.8017 23.3406 34.8335 22.7139 34.2459C22.0871 33.6583 22.0554 32.6739 22.643 32.0472L28.4763 25.8249C29.0445 25.2188 29.9888 25.1662 30.6209 25.7056L35.2249 29.6343L41.2235 22.0361C41.7559 21.3618 42.734 21.2467 43.4083 21.779C44.0826 22.3114 44.1977 23.2895 43.6654 23.9638L36.6654 32.8305C36.1186 33.5231 35.1059 33.6227 34.4347 33.0499L29.7306 29.0358L24.9126 34.175Z" fill="#4AD991"/>
            </svg>
            <!-- Deactivate: Modern clock icon -->
            <svg *ngSwitchCase="'clock'" width="48" height="48" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path opacity="0.3" d="M37 0C49.7025 0 60 10.2975 60 23V37C60 49.7025 49.7025 60 37 60H23C10.2975 60 0 49.7025 0 37V23C0 10.2975 10.2975 0 23 0H37Z" fill="#FF9066"/>
              <path opacity="0.78" fill-rule="evenodd" clip-rule="evenodd" d="M28.6312 23.8093C28.6512 23.5488 28.8684 23.3477 29.1297 23.3477H29.5475C29.8044 23.3477 30.0195 23.5423 30.045 23.7979L30.6667 30.0143L35.0814 32.537C35.2372 32.626 35.3333 32.7917 35.3333 32.9712V33.3597C35.3333 33.6894 35.0199 33.9288 34.7018 33.8421L28.3987 32.123C28.1673 32.0599 28.0133 31.8414 28.0317 31.6023L28.6312 23.8093Z" fill="#FF9066"/>
              <path opacity="0.901274" d="M21.8525 15.1903C21.9479 14.7907 22.4575 14.6697 22.7217 14.9843L24.5205 17.1288C26.2036 16.4121 28.0552 16.0136 30 16.0136C37.7319 16.0136 43.9998 22.2817 44 30.0136C44 37.7455 37.732 44.0136 30 44.0136C22.268 44.0136 16 37.7455 16 30.0136C16 28.7005 16.1805 27.4295 16.5186 26.2245L19.0859 26.9452C18.8086 27.9341 18.667 28.9631 18.667 30.0136C18.667 36.2728 23.7408 41.3475 30 41.3475C36.2592 41.3475 41.333 36.2728 41.333 30.0136C41.3328 23.7545 36.2591 18.6805 30 18.6805C28.7318 18.6805 27.4968 18.889 26.332 19.287L28.1328 21.4335C28.3974 21.7487 28.1892 22.2305 27.7783 22.2538L20.7334 22.6532C20.3992 22.672 20.1411 22.3636 20.2188 22.038L21.8525 15.1903Z" fill="#FF9066"/>
            </svg>
          </ng-container>
        </span>
      </div>
      <div class='text-2xl font-bold text-gray-900'>{{value}}</div>
      <div class='flex items-center gap-1 text-xs' [ngClass]="changeType === 'up' ? 'text-green-500' : 'text-red-500'">
        <span class='material-icons text-base'>{{changeType === 'up' ? 'trending_up' : 'trending_down'}}</span>
        {{change}} {{changeType === 'up' ? 'Up' : 'Down'}} from yesterday
      </div>
    </div>
  `
})
export class StatCardComponent {
  @Input() iconType = '';
  @Input() iconBg = '';
  @Input() label = '';
  @Input() value = '';
  @Input() change = '';
  @Input() changeType: 'up' | 'down' = 'up';
  showFallback = false;
} 